sequenceDiagram
    Start ->>+ XyzActivity: onCreate()
    XyzActivity ->>+ PermissionActivity: assurePermissionsAreGranted(:PermissionsSpec)
    PermissionActivity ->>+ ActivityRequirements: getSpecsArray()
    ActivityRequirements -->>- PermissionActivity: x
    PermissionActivity ->>+ PermissionManager: areAllPermissionsGranted(:Array<PermissionWithCode>)
    PermissionManager -->>- PermissionActivity: x
    alt all permissions granted
        PermissionActivity ->>+ XyzActivity: onPermissionsGranted()
        XyzActivity -->>- PermissionActivity: x
    else
        PermissionActivity ->>+ PermissionManager: requestAllPermissions(:PermissionsSpec)
        PermissionManager ->>+ ActivityRequirements: getSpecsArray()
        ActivityRequirements -->>- PermissionManager: x
        PermissionManager ->>+ ActivityCompat: requestPermissions(permissions,requestCode)
        ActivityCompat -->>- PermissionManager: x
        PermissionManager -->>- PermissionActivity: x
    end
    PermissionActivity -->>- XyzActivity: x
    XyzActivity -->>- Start: x